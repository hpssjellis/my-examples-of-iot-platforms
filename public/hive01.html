<script src="https://cdnjs.cloudflare.com/ajax/libs/paho-mqtt/1.0.1/mqttws31.js" type="text/javascript"></script>


// Create a client instance: Broker, Port, Websocket Path, Client ID
client = new Paho.MQTT.Client("iot.eclipse.org", Number(80), "/ws", "clientId");

// set callback handlers
client.onConnectionLost = function (responseObject) {
    console.log("Connection Lost: "+responseObject.errorMessage);
}

client.onMessageArrived = function (message) {
  console.log("Message Arrived: "+message.payloadString);
}

/*
client.onMessageArrived = function (message) {
  console.log("Message Arrived: " + message.payloadString);
  console.log(“Topic:     “ + message.destinationName);
  console.log(“QoS:       “ + message.qos);
  console.log(“Retained:  “ + message.retained);
  // Read Only, set if message might be a duplicate sent from broker
  console.log(“Duplicate: “ + message.duplicate);
*/

// Called when the connection is made
function onConnect(){
	console.log(“Connected!”);
}




// Connect the client, providing an onConnect callback
client.connect({
	onSuccess: onConnect
});

/*
client.connect({
	onSuccess: onConnect, 
	userName : “Username”,
	password : “password”
});

*/










/*





// Create a client instance
client = new Paho.MQTT.Client(location.hostname, Number(location.port), "clientId");

// set callback handlers
client.onConnectionLost = onConnectionLost;
client.onMessageArrived = onMessageArrived;

// connect the client
client.connect({onSuccess:onConnect});

// called when the client connects
function onConnect() {
  // Once a connection has been made, make a subscription and send a message.
  console.log("onConnect");
  client.subscribe("/World");
  message = new Paho.MQTT.Message("Hello");
  message.destinationName = "/World";
  client.send(message); 
}

// called when the client loses its connection
function onConnectionLost(responseObject) {
  if (responseObject.errorCode !== 0) {
    console.log("onConnectionLost:"+responseObject.errorMessage);
  }
}

// called when a message arrives
function onMessageArrived(message) {
  console.log("onMessageArrived:"+message.payloadString);
}

*/



// Publish a Message
var message = new Paho.MQTT.Message(“Message Payload”);
message.destinationName = “topic”;
message.qos = 0;

client.send(message);

client.subscribe(“topic”);


